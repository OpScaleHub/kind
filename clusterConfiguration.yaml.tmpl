kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
  image: ghcr.io/opscalehub/kind:v${KIND_VERSION}
  extraPortMappings:
  - containerPort: 80
    hostPort: 80
    protocol: TCP
  - containerPort: 443
    hostPort: 443
    protocol: TCP
  kubeadmConfigPatches:
  - |
    kind: ClusterConfiguration
    apiServer:
      extraArgs:
        cert-manager.io/ca-bundle-path: /etc/ssl/certs/ca-certificates.crt
      extraMounts:
      - hostPath: /etc/pki/tls/certs/ca-bundle.crt
        containerPath: /etc/ssl/certs/ca-certificates.crt
- role: worker
  image: ghcr.io/opscalehub/kind:v${KIND_VERSION}
- role: worker
  image: ghcr.io/opscalehub/kind:v${KIND_VERSION}
